
---

## 2) Add `docs/TECH_NOTE.md` (copy/paste)

```markdown
# TECH NOTE — Mapping the Prototype to the SoK Properties

**Goal:** Demonstrate the SoK design properties — **Transparency, Validity, Separation** — with a minimal pipeline that produces verifiable evidence for dependency updates.

## Pipeline steps and evidence

1) **Plan updates (`plan.csv`)**  
   - Uses OSV “fixed in” data to compute the **minimum higher safe version**; skips invalid versions (e.g., git SHAs).  
   - *Property:* Transparency (clear plan) → Validity (minimum change).

2) **SBOM (CycloneDX `sbom.cdx.json`)**  
   - Generated by `cdxgen`; includes transitive deps.  
   - *Property:* Transparency — SBOMs and dependency analysis are called out as transparency mechanisms. :contentReference[oaicite:7]{index=7}

3) **Scan SBOM (OSV‑Scanner → `reports/osv-report.json`)**  
   - Runs the official Docker image; exit code **1** means “vulns found” and is non‑fatal.  
   - *Property:* Transparency (risk visibility) + input to Validity. :contentReference[oaicite:8]{index=8}

4) **Sign & Verify SBOM (`sbom.sig`, `sbom.cert`)**  
   - **Sigstore cosign (keyless/OIDC)** signs; verify enforces issuer `https://token.actions.githubusercontent.com` and repo‑scoped identity.  
   - *Property:* Validity — artifact integrity + actor authentication via OIDC identity. :contentReference[oaicite:9]{index=9}

5) **Reproducibility smoke test (`reproducibility.diff`)**  
   - Two clean `venv` environments; compare `pip freeze`.  
   - *Property:* Validity — reproducibility is recommended as integrity evidence. :contentReference[oaicite:10]{index=10}

6) **PR flow (separation of duties)**  
   - Changes land as a PR (no in‑place edits on `main`).  
   - *Property:* Separation — ephemeral CI worker + PR review boundary. :contentReference[oaicite:11]{index=11}

## Why this matches the SoK

- **Transparency**: SBOM + OSV report + metrics. :contentReference[oaicite:12]{index=12}  
- **Validity**: Signed evidence + identity‑checked verification + reproducibility. :contentReference[oaicite:13]{index=13}  
- **Separation**: CI isolation, containerized scanner, PR‑gated changes. :contentReference[oaicite:14]{index=14}

## Limitations & next steps (research threads)

- **Operations/Actors transparency** is under‑emphasized in practice; the SoK shows a gap and research opportunity. Extend with **in‑toto attestations** and **SLSA provenance**. :contentReference[oaicite:15]{index=15}  
- Add **policy gates** (e.g., block if critical CVEs or signature missing).  
- Add **reachability**/exploitability signals to reduce noise.  
- Multi‑ecosystem support (npm, Go, Java), not just Python.  
